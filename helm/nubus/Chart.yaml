# SPDX-License-Identifier: AGPL-3.0-only
# SPDX-FileCopyrightText: 2024-2025 Univention GmbH
apiVersion: "v2"
name: "nubus"
description: "Univention Nubus"
type: "application"
version: "1.0.0"

dependencies:
  - name: "nubus-common"
    version: "0.28.0"
    repository: "oci://artifacts.software-univention.de/nubus/charts"

  - name: "guardian"
    alias: "nubusGuardian"
    repository: "oci://artifacts.software-univention.de/nubus/charts"
    version: "0.23.2"
    condition: "nubusGuardian.enabled"

  - name: "license-import"
    alias: "nubusLicenseImport"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.7.3-pre-dpapoutsis-nubus-common-templated-keymapping"
    condition: "nubusLicenseImport.enabled"

  # ldap-server related chart(s)
  - name: "ldap-notifier"
    alias: "nubusLdapNotifier"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.47.3-pre-dpapoutsis-test-nubus-common-templated-keymapping"
    condition: "nubusLdapNotifier.enabled"

  - name: "ldap-server"
    alias: "nubusLdapServer"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.47.3-pre-dpapoutsis-test-nubus-common-templated-keymapping"
    condition: "nubusLdapServer.enabled"

  # portal related chart(s)
  - name: "notifications-api"
    alias: "nubusNotificationsApi"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.83.2-pre-dpapoutsis-nubus-common-templated-keymapping"
    condition: "nubusNotificationsApi.enabled"

  - name: "portal-frontend"
    alias: "nubusPortalFrontend"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.83.2-pre-dpapoutsis-nubus-common-templated-keymapping"
    condition: "nubusPortalFrontend.enabled"

  - name: "portal-consumer"
    alias: "nubusPortalConsumer"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.83.2-pre-dpapoutsis-nubus-common-templated-keymapping"
    condition: "nubusPortalConsumer.enabled"

  - name: "portal-server"
    alias: "nubusPortalServer"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.83.2-pre-dpapoutsis-nubus-common-templated-keymapping"
    condition: "nubusPortalServer.enabled"

  # selfservice related chart(s)
  - name: "selfservice-consumer"
    alias: "nubusSelfServiceConsumer"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.19.20-pre-dpapoutsis-nubus-common-templated-keymapping"
    condition: "nubusSelfServiceConsumer.enabled"

  # provisioning related chart(s)
  - name: "provisioning"
    alias: "nubusProvisioning"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.62.3-pre-dpapoutsis-nubus-common-templated-keymapping"
    condition: "nubusProvisioning.enabled"

  - name: "udm-listener"
    alias: "nubusUdmListener"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.62.3-pre-dpapoutsis-nubus-common-templated-keymapping"
    condition: "nubusProvisioning.enabled"

  # keycloak related chart(s)
  - name: "keycloak"
    alias: "keycloak"
    repository: "oci://artifacts.software-univention.de/nubus/charts"
    version: "0.14.0"
    condition: "keycloak.enabled"

  - name: "keycloak-extensions"
    alias: "nubusKeycloakExtensions"
    repository: "oci://artifacts.software-univention.de/nubus/charts"
    version: "0.23.0"
    condition: "nubusKeycloakExtensions.enabled"

  - name: "keycloak-bootstrap"
    alias: "nubusKeycloakBootstrap"
    repository: "oci://artifacts.software-univention.de/nubus/charts"
    version: "0.18.0"
    condition: "nubusKeycloakBootstrap.enabled"

  - name: "stack-data-ums"
    alias: "nubusStackDataUms"
    repository: "oci://artifacts.software-univention.de/nubus/charts"
    version: "0.99.11"
    condition: "nubusStackDataUms.enabled"

  - name: "twofa-helpdesk"
    alias: "nubusTwofaHelpdesk"
    repository: "oci://artifacts.software-univention.de/nubus/charts"
    version: "0.14.5"
    condition: "nubusTwofaHelpdesk.enabled"

  # udm-rest-api related chart(s)
  - name: "udm-rest-api"
    alias: "nubusUdmRestApi"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.41.0-pre-dpapoutsis-nubus-common-templated-keymapping"
    condition: "nubusUdmRestApi.enabled"

  # umc related chart(s)
  - name: "umc-gateway"
    alias: "nubusUmcGateway"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.53.0-pre-dpapoutsis-nubus-common-templated-keymapping"
    condition: "nubusUmcGateway.enabled"

  - name: "umc-server"
    alias: "nubusUmcServer"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.53.0-pre-dpapoutsis-nubus-common-templated-keymapping"
    condition: "nubusUmcServer.enabled"

  # scim-server related chart(s)
  - name: "scim-server"
    alias: "nubusScimServer"
    repository: "oci://artifacts.software-univention.de/nubus-dev/charts"
    version: "0.46.0-pre-dpapoutsis-nubus-common-templated-keymapping"
    condition: "nubusScimServer.enabled"

  # Optionally bundled external dependencies
  - name: "postgresql"
    repository: "oci://docker.io/bitnamicharts"
    version: "^12.x.x"
    condition: "postgresql.enabled"

  - name: "minio"
    repository: "oci://docker.io/bitnamicharts"
    version: "14.7.0"
    condition: "minio.enabled"
